!function(a){function b(a){return null==a?"":"string"==typeof a?a.trim():(a+"").replace("/^[\\s\ufeff ]+|[\\s\ufeff ]+$/g","")}function c(b,c,e){return e=q(c,e),this.on("click.pjax",b,function(b){var c=e;c.container||(c=a.extend({},e),c.container=a(this).attr("data-pjax")),d(b,c)})}function d(b,c,d){d=q(c,d);var e=b.currentTarget,g=a(e);if("A"!==e.tagName.toUpperCase())throw"$.fn.pjax or $.pjax.click requires an anchor element";if(!(b.which>1||b.metaKey||b.ctrlKey||b.shiftKey||b.altKey||location.protocol!==e.protocol||location.hostname!==e.hostname||e.href.indexOf("#")>-1&&p(e)==p(location)||b.isDefaultPrevented())){var h={url:e.href,container:g.attr("data-pjax"),target:e},i=a.extend({},h,d),j=a.Event("pjax:click");g.trigger(j,[i]),j.isDefaultPrevented()||(f(i),b.preventDefault(),g.trigger("pjax:clicked",[i]))}}function e(b,c,d){d=q(c,d);var e=b.currentTarget,g=a(e);if("FORM"!==e.tagName.toUpperCase())throw"$.pjax.submit requires a form element";var h={type:(g.attr("method")||"GET").toUpperCase(),url:g.attr("action"),container:g.attr("data-pjax"),target:e};if("GET"!==h.type&&void 0!==window.FormData)h.data=new FormData(e),h.processData=!1,h.contentType=!1;else{if(g.find(":file").length)return;h.data=g.serializeArray()}f(a.extend({},h,d)),b.preventDefault()}function f(b){function c(c,d,e){e||(e={}),e.relatedTarget=b.target;var f=a.Event(c,e);return g.trigger(f,d),!f.isDefaultPrevented()}b=a.extend(!0,{},a.ajaxSettings,f.defaults,b),"function"==typeof b.url&&(b.url=b.url());var d=o(b.url).hash,e=typeof b.container;if("string"!==e)throw"expected string value for 'container' option; got "+e;var g=b.context=a(b.container);if(!g.length)throw"the container selector '"+b.container+"' did not match anything";b.data||(b.data={}),Array.isArray(b.data)?b.data.push({name:"_pjax",value:b.container}):b.data._pjax=b.container;var i;b.beforeSend=function(a,e){if("GET"!==e.type&&(e.timeout=0),a.setRequestHeader("X-PJAX","true"),a.setRequestHeader("X-PJAX-Container",b.container),!c("pjax:beforeSend",[a,e]))return!1;e.timeout>0&&(i=setTimeout(function(){c("pjax:timeout",[a,b])&&a.abort("timeout")},e.timeout),e.timeout=0);var f=o(e.url);d&&(f.hash=d),b.requestUrl=n(f)},b.complete=function(a,d){i&&clearTimeout(i),c("pjax:complete",[a,d,b]),c("pjax:end",[a,b])},b.error=function(a,d,e){var f=t("",a,b),g=c("pjax:error",[a,d,e,b]);"GET"==b.type&&"abort"!==d&&g&&h(f.url)},b.success=function(e,i,j){function k(){var f=g.find("input[autofocus], textarea[autofocus]").last()[0];f&&document.activeElement!==f&&f.trigger("focus"),u(q.scripts);var h=b.scrollTo;if(d){var k=decodeURIComponent(d.slice(1)),l=document.getElementById(k)||document.getElementsByName(k)[0];l&&(h=a(l).offset().top)}"number"==typeof h&&a(window).scrollTop(h),c("pjax:success",[e,i,j,b])}var m=f.state,n="function"==typeof a.pjax.defaults.version?a.pjax.defaults.version():a.pjax.defaults.version,p=j.getResponseHeader("X-PJAX-Version"),q=t(e,j,b),r=o(q.url);if(d&&(r.hash=d,q.url=r.href),n&&p&&n!==p)return void h(q.url);if(!q.contents)return void h(q.url);if(f.state={id:b.id||l(),url:q.url,title:q.title,container:b.container,fragment:b.fragment,timeout:b.timeout},(b.push||b.replace)&&window.history.replaceState(f.state,q.title,q.url),a.contains(g,document.activeElement))try{document.activeElement.blur()}catch(s){}q.title&&(document.title=q.title),c("pjax:beforeReplace",[q.contents,b],{state:f.state,previousState:m}),"function"==typeof b.renderCallback?b.renderCallback(g,q.contents,k):(g.html(q.contents),k())},f.state||(f.state={id:l(),url:window.location.href,title:document.title,container:b.container,fragment:b.fragment,timeout:b.timeout},window.history.replaceState(f.state,document.title)),k(f.xhr),f.options=b;var j=f.xhr=a.ajax(b);return j.readyState>0&&(b.push&&!b.replace&&(v(f.state.id,[b.container,m(g)]),window.history.pushState(null,"",b.requestUrl)),c("pjax:start",[j,b]),c("pjax:send",[j,b])),f.xhr}function g(b,c){var d={url:window.location.href,push:!1,replace:!0,scrollTo:!1};return f(a.extend(d,q(b,c)))}function h(a){window.history.replaceState(null,"",f.state.url),window.location.replace(a)}function i(b){B||k(f.xhr);var c,d=f.state,e=b.state;if(e&&e.container){if(B&&C==e.url)return;if(d){if(d.id===e.id)return;c=d.id<e.id?"forward":"back"}var g=E[e.id]||[],i=g[0]||e.container,j=a(i),l=g[1];if(j.length){d&&w(c,d.id,[i,m(j)]);var n=a.Event("pjax:popstate",{state:e,direction:c});j.trigger(n);var o={id:e.id,url:e.url,container:i,push:!1,fragment:e.fragment,timeout:e.timeout,scrollTo:!1};if(l){j.trigger("pjax:start",[null,o]),f.state=e,e.title&&(document.title=e.title);var p=a.Event("pjax:beforeReplace",{state:e,previousState:d});j.trigger(p,[l,o]),j.html(l),j.trigger("pjax:end",[null,o])}else f(o);j[0].offsetHeight}else h(location.href)}B=!1}function j(b){var c="function"==typeof b.url?b.url():b.url,d=b.type?b.type.toUpperCase():"GET",e=a("<form>",{method:"GET"===d?"GET":"POST",action:c,style:"display:none"});"GET"!==d&&"POST"!==d&&e.append(a("<input>",{type:"hidden",name:"_method",value:d.toLowerCase()}));var f=b.data;if("string"==typeof f)a.each(f.split("&"),function(b,c){var d=c.split("=");e.append(a("<input>",{type:"hidden",name:d[0],value:d[1]}))});else if(Array.isArray(f))a.each(f,function(b,c){e.append(a("<input>",{type:"hidden",name:c.name,value:c.value}))});else if("object"==typeof f){var g;for(g in f)e.append(a("<input>",{type:"hidden",name:g,value:f[g]}))}a(document.body).append(e),e.submit()}function k(b){b&&b.readyState<4&&(b.onreadystatechange=a.noop,b.abort())}function l(){return(new Date).getTime()}function m(a){var b=a.clone();return b.find("script").each(function(){this.src||jQuery._data(this,"globalEval",!1)}),b.contents()}function n(a){return a.search=a.search.replace(/([?&])(_pjax|_)=[^&]*/g,"").replace(/^&/,""),a.href.replace(/\?($|#)/,"$1")}function o(a){var b=document.createElement("a");return b.href=a,b}function p(a){return a.href.replace(/#.*/,"")}function q(b,c){return b&&c?(c=a.extend({},c),c.container=b,c):a.isPlainObject(b)?b:{container:b}}function r(a,b){return a.filter(b).add(a.find(b))}function s(b){return a.parseHTML(b,document,!0)}function t(c,d,e){var f={},g=/<html/i.test(c),h=d.getResponseHeader("X-PJAX-URL");f.url=h?n(o(h)):e.requestUrl;var i,j;if(g){j=a(s(c.match(/<body[^>]*>([\s\S.]*)<\/body>/i)[0]));var k=c.match(/<head[^>]*>([\s\S.]*)<\/head>/i);i=null!=k?a(s(k[0])):j}else i=j=a(s(c));if(0===j.length)return f;if(f.title=r(i,"title").last().text(),e.fragment){var l=j;"body"!==e.fragment&&(l=r(l,e.fragment).first()),l.length&&(f.contents="body"===e.fragment?l:l.contents(),f.title||(f.title=l.attr("title")||l.data("title")))}else g||(f.contents=j);return f.contents&&(f.contents=f.contents.not(function(){return a(this).is("title")}),f.contents.find("title").remove(),f.scripts=r(f.contents,"script[src]").remove(),f.contents=f.contents.not(f.scripts)),f.title&&(f.title=b(f.title)),f}function u(b){if(b){var c=a("script[src]");b.each(function(){var b=this.src;if(!c.filter(function(){return this.src===b}).length){var d=document.createElement("script"),e=a(this).attr("type");e&&(d.type=e),d.src=a(this).attr("src"),document.head.appendChild(d)}})}}function v(a,b){E[a]=b,G.push(a),x(F,0),x(G,f.defaults.maxCacheLength)}function w(a,b,c){var d,e;E[b]=c,"forward"===a?(d=G,e=F):(d=F,e=G),d.push(b),b=e.pop(),b&&delete E[b],x(d,f.defaults.maxCacheLength)}function x(a,b){for(;a.length>b;)delete E[a.shift()]}function y(){return a("meta").filter(function(){var b=a(this).attr("http-equiv");return b&&"X-PJAX-VERSION"===b.toUpperCase()}).attr("content")}function z(){a.fn.pjax=c,a.pjax=f,a.pjax.enable=a.noop,a.pjax.disable=A,a.pjax.click=d,a.pjax.submit=e,a.pjax.reload=g,a.pjax.defaults={timeout:650,push:!0,replace:!1,type:"GET",dataType:"html",scrollTo:0,maxCacheLength:20,version:y},a(window).on("popstate.pjax",i)}function A(){a.fn.pjax=function(){return this},a.pjax=j,a.pjax.enable=z,a.pjax.disable=a.noop,a.pjax.click=a.noop,a.pjax.submit=a.noop,a.pjax.reload=function(){window.location.reload()},a(window).off("popstate.pjax",i)}var B=!0,C=window.location.href,D=window.history.state;D&&D.container&&(f.state=D),"state"in window.history&&(B=!1);var E={},F=[],G=[];"state"in a.Event.prototype||a.event.addProp("state"),a.support.pjax=window.history&&window.history.pushState&&window.history.replaceState&&!navigator.userAgent.match(/((iPod|iPhone|iPad).+\bOS\s+[1-4]\D|WebApps\/.+CFNetwork)/),a.support.pjax?z():A()}(jQuery);